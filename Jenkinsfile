pipeline {
    agent { label 'local' }
    stages {
       stage('build') {
          steps {
          sh 'export PATH="$PATH:/usr/local/bin"'
          sh '/usr/local/bin/docker build -f Dockerfile -t hello:latest .'
          sh '/usr/local/bin/docker tag a3352949a811 789391878624.dkr.ecr.eu-west-1.amazonaws.com/hello_world'
          sh '/usr/local/bin/docker login -u AWS -p eyJwYXlsb2FkIjoiVkhGYnVsUUxBR2dNLzlyU1k4cWdoaVhpdnJSRVdvZkZJUFQwLzZuRWdOT2Zhb2ZyTkZheWhaZ29KMFV0WmdEdnRPMDRRQW93MnhwZm5OcnQ1THhONCtJRVd0UWx3QzBINkJVUEljN1B2T2lnL1pxNTlteFd2U3RTMTVSQkpzUzYzdW5nc0ZNVjBaUUlrM2VFWm1IRis1KzNyWDJlT1QrQkhlS3JQbXpTOVRuYWViaUZHUXRDaWF1bXF1TEZFTkIybEtTQWhheGdoZyszdGdrR3NCVFEyM1lkUzlmRnBwTG13dkdPRWFXQ2JYMElYQTlXRlZzMm8xNFhLUzU3UDFLUEVSbzFjWEdsT1FMVjlOaisxWUVON2pXUERFMFZmRmZCWXZVczUvK0hJb0RFK2xzUklvekp4SU8weXRyTUY0RTdjc1AwWEZZL1BTSmp6SWlSOG90N0lqOHlJU0JWd0crOENmZjFZdGlWcHdRanNqZE9TMmVjTlRCY0dGVXVpMmxnWjFSOHhSdzhVMEZGZ1hUeTY0SWFubCsvSEhMSlBaN3NFbDJ4WlBwajR6MmpSaXhFZkV3MUtVUnNqZGlmeHFSV3c3dXVJY0dZS2RHR3ByZ3ZYZXFSb01NRTBaMk9rRnJvS0lad2s4a2E4aEx5VFV3cURFRExEUmRreWNZK1MxVDIySzZqT0t4STBPQnJjUXNQZ3RyclAzNlJ5WlV1RkFNWHZlblcyWGtNdG1pZjZEdjE1NWFGVGpIVk9GN0RUVkNPS3ZoVjQ3aGZVWkNrdEZyT1JzYU9LUlptai9nekEzYk1Lb0ZMK3lSNkVaT3NpUjRmR3ErU095aHlYRTFDQWdtRml0U1hMeFJiN1JSUUpVZ2Q5OXRhQmpJT3RxZzVNZXVpUy9KcmxSQ2IzLzN6aEpnREtKTTBTdTlNSnN0VVRWVThpY0dyeUVQaERqeEkzT2E2S3kzUzZ2MmxyY1hiOHFZNHF5bXlmT1pST0tNa0lTWkpMa0pVYW4wQ1J5RkI5eWlrSWxEaFFCYUQ1SWU4VHBjN1VJQ1QvMGpSb3Q3WnU4czlWN3V1cytwakZOU0FsSGdwK2NURURVV21LV2RDY29hczBPWFpsY2xWSUlmazNvVnZKaTlrbmlDeWgzNTFVU3BGaFQ4a25IWlNmaGtvTTljTXpiZWE1S3dONkJEdHZrc0lEWk9CL1UyNjA4Y1d5TEV1YloyZE8zVnl5ZlBId0RxVEpqd2JOT1NZQ0JqaGpWTFp2cDFJenhiVVc2U21iempjWjRod2I3SVZaNXRGTnpPUC9Yd2pwSjRsRytvNlFUUlRERm9qUlZSYTlXdktKMWZBR1Q4eVVGOVhQSWEvQURpMjNMdmI4SzgwMERoUGN4OUFoT0VWVWtEd3p1UmM1VDRxVk5WUGV3MFNzUXl2NHdmemtVTlNGQlE2RHl1STlHTFJYYXk4eUhTazl3U2k3LzFPcVdTRTBtTlkiLCJkYXRha2V5IjoiQVFFQkFIaCtkUytCbE51ME54blh3b3diSUxzMTE1eWpkK0xOQVpoQkxac3VuT3hrM0FBQUFINHdmQVlKS29aSWh2Y05BUWNHb0c4d2JRSUJBREJvQmdrcWhraUc5dzBCQndFd0hnWUpZSVpJQVdVREJBRXVNQkVFRFBlU0w0SlJhQndhOG42TWxRSUJFSUE3Qkw4Mi9FekNZZXZlNWFCWjZ0Q0pNSlpwZUZSK3VPbm1ieVRRVFpFT0t6N1pkZW85bkRWYlcvMDZrUDVzc2lyQjhCcGFpQThTT2VwK2pORT0iLCJ2ZXJzaW9uIjoiMiIsInR5cGUiOiJEQVRBX0tFWSIsImV4cGlyYXRpb24iOjE1NDUyNjA4Mjl9 https://789391878624.dkr.ecr.eu-west-1.amazonaws.com'
          sh '/usr/local/bin/docker push 789391878624.dkr.ecr.eu-west-1.amazonaws.com/hello_world'
          sh '''
                echo 'Multiline'
                echo 'hello'
             '''
             echo 'not using shell'
          }
       }
    }
}
